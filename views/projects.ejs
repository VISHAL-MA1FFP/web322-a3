<!DOCTYPE html>
<html lang="en" data-theme="dim">
<head>
  <meta charset="UTF-8" />
  <title>Projects</title>
  <link rel="stylesheet" href="/css/main.css" />
</head>
<body>

<%- include('partials/navbar') %>

<main class="container mx-auto p-8">
  <h1 class="text-3xl font-bold mb-6">Our Projects</h1>

  <% if (session.user) { %>
    <a class="btn btn-success mb-6" href="/solutions/addProject">Add Project</a>
  <% } %>

  <% if (!projects || !projects.length) { %>
    <p class="text-gray-400">No projects found.</p>
  <% } else { %>
    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
      <% projects.forEach(project => { %>
        <div class="card bg-base-100 shadow-xl">
          <figure class="bg-base-200">
            <img src="<%= project.feature_img_url %>"
                 alt="<%= project.title %>"
                 class="w-full h-56 object-cover" />
          </figure>
          <div class="card-body">
            <h2 class="card-title"><%= project.title %></h2>

            <p class="line-clamp-3"><%= project.summary_short %></p>

            <div class="text-sm opacity-70">
              Sector: <%= project.Sector ? project.Sector.sector_name : 'N/A' %>
            </div>

            <div class="card-actions justify-between mt-3">
              <a href="/solutions/project/<%= project.id %>" class="btn btn-primary">View</a>

              <% if (session.user) { %>
                <a href="/solutions/editProject/<%= project.id %>" class="btn">Edit</a>
              <% } %>
            </div>

          </div>
        </div>
      <% }) %>
    </div>
  <% } %>
</main>

</body>
</html>
